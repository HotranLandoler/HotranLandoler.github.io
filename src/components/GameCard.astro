---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import type { Translations } from '~/i18n';
import { getCurrentTranslations } from '~/i18n';
import HoverArrowText from './HoverArrowText.astro';

export interface Props {
  gameKey: keyof Translations['games'];
  imgSrc: ImageMetadata;
  href: string;
}

const { gameKey, imgSrc, href } = Astro.props;
const t = getCurrentTranslations(Astro.params);

type Game = (typeof t.games)['cquHorror'];
---

<a href={href}>
  <figure class="game-card">
    <Image src={imgSrc} alt="" />
    <figcaption class="info">
      <p class="game-title">
        <HoverArrowText>
          {(t.games[gameKey] as Game).title}
        </HoverArrowText>
      </p>
      <p class="game-desc">{(t.games[gameKey] as Game).desc}</p>
    </figcaption>
  </figure>
</a>

<style>
  img {
    aspect-ratio: 3 / 4;

    margin-bottom: 0.5rem;
  }
  .game-card {
    overflow: hidden;

    display: grid;
    grid-template-rows: auto 1fr;
  }
  .game-title {
    font-size: 1.2rem;
    font-weight: bold;

    margin-bottom: 0.5rem;
  }
  .info {
    position: relative;

    font-size: 0.8rem;
  }
</style>
